doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Document
    link(rel="stylesheet", href="/css/signup.css")
  body
  block content
  h1 Sign Up
  p Please fill in the following fields to create an account.

  form(id="signup-form" method="POST")
    label(for="name") Full Name:
    input(type="text" id="name" name="name" required)
    br
    label(for="email") Email Address:
    input(type="email" id="email" name="email" required)
    br
    label(for="password") Password:
    input(type="password" id="password" name="password" required)
    br
    button(type="submit") Sign Up

script.
  const signupForm = document.getElementById("signup-form");

  signupForm.addEventListener("submit", async (event) => {
    event.preventDefault();

    // Get the form data
    const formData = new FormData(signupForm);
    const formObject = {};

    // Populate the formObject with form data
    formData.forEach((value, key) => {
      formObject[key] = value;
    });

    // Create an XMLHttpRequest object
    const xhr = new XMLHttpRequest();

    // Open the request
    xhr.open("POST", "/auth/test", true);

    // Set the request header
    xhr.setRequestHeader("Content-Type", "application/json");

    // Send the request
    xhr.send(JSON.stringify(formObject));

    // Handle the server's response
    xhr.onload = function () {
      if (xhr.status === 200) {
        // Redirect to the login page
        window.location.href = "/login";
      } else {
        // Display the error message
        const error = JSON.parse(xhr.responseText);
        alert(error.error);
      }
    };
  });
